<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jstableåŒ…äºšç»„åˆ†æå‡½æ•°è¯¦ç»†è¯´æ˜</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f9ff;
            color: #333;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h2 {
            color: #2980b9;
            margin-top: 40px;
            padding: 10px 15px;
            background: linear-gradient(90deg, #3498db20, transparent);
            border-left: 5px solid #3498db;
        }
        .function-section {
            margin: 25px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #f8fafc;
        }
        .function-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e74c3c;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            text-align: left;
            padding: 15px;
            font-weight: bold;
            font-size: 1.1em;
        }
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: top;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        tr:hover {
            background-color: #e3f2fd;
            transition: background-color 0.3s;
        }
        .param-name {
            font-weight: bold;
            color: #2c3e50;
            font-family: 'Courier New', monospace;
        }
        .param-type {
            color: #7f8c8d;
            font-style: italic;
        }
        .required {
            color: #e74c3c;
            font-weight: bold;
        }
        .default-value {
            background-color: #e8f5e9;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .example {
            background-color: #fff3e0;
            padding: 15px;
            border-left: 4px solid #ff9800;
            margin: 15px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            line-height: 1.4;
        }
        .note {
            background-color: #e8f5e9;
            padding: 12px 15px;
            border-left: 4px solid #4caf50;
            margin: 15px 0;
            border-radius: 5px;
        }
        .warning {
            background-color: #ffebee;
            padding: 12px 15px;
            border-left: 4px solid #f44336;
            margin: 15px 0;
            border-radius: 5px;
        }
        .return-table {
            background-color: #f1f8e9;
        }
        .return-table th {
            background: linear-gradient(135deg, #4caf50, #388e3c);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>jstableåŒ…äºšç»„åˆ†æå‡½æ•°è¯¦ç»†è¯´æ˜</h1>
        
        <div class="note">
            <strong>ğŸ“Œ åŒ…ä¿¡æ¯ï¼š</strong> jstableç‰ˆæœ¬ 1.3.23 | ä¸»è¦ç”¨äºä»å›å½’æ¨¡å‹ç»“æœåˆ›å»ºå‘è¡¨çº§åˆ«çš„è¡¨æ ¼
        </div>

        <h2>ğŸ“Š äºšç»„åˆ†æå‡½æ•°æ¦‚è¿°</h2>
        <p>jstableåŒ…æä¾›äº†ä¸¤ä¸ªä¸»è¦çš„äºšç»„åˆ†æå‡½æ•°ï¼Œç”¨äºåœ¨ä¸åŒäºšç»„ä¸­åˆ†åˆ«æ‹Ÿåˆæ¨¡å‹å¹¶æ¯”è¾ƒæ•ˆåº”ä¼°è®¡å€¼ã€‚</p>

        <!-- TableSubgroupMultiCox å‡½æ•° -->
        <div class="function-section">
            <div class="function-title">TableSubgroupMultiCox() - Coxæ¨¡å‹äºšç»„åˆ†æ</div>
            
            <table>
                <tr>
                    <th width="15%">å‚æ•°å</th>
                    <th width="10%">ç±»å‹</th>
                    <th width="10%">å¿…éœ€</th>
                    <th width="15%">é»˜è®¤å€¼</th>
                    <th width="50%">è¯¦ç»†è¯´æ˜</th>
                </tr>
                <tr>
                    <td class="param-name">formula</td>
                    <td class="param-type">formula</td>
                    <td class="required">æ˜¯</td>
                    <td>-</td>
                    <td>
                        <strong>Coxæ¨¡å‹å…¬å¼</strong><br>
                        æ ¼å¼ï¼š<code>Surv(time, status) ~ predictor_variables</code><br>
                        â€¢ <code>time</code>: ç”Ÿå­˜æ—¶é—´å˜é‡<br>
                        â€¢ <code>status</code>: äº‹ä»¶çŠ¶æ€å˜é‡(0=åˆ å¤±, 1=äº‹ä»¶)<br>
                        â€¢ <code>predictor_variables</code>: é¢„æµ‹å˜é‡ï¼Œç”¨+å·è¿æ¥
                    </td>
                </tr>
                <tr>
                    <td class="param-name">var_subgroups</td>
                    <td class="param-type">character vector</td>
                    <td class="required">æ˜¯</td>
                    <td>-</td>
                    <td>
                        <strong>äºšç»„å˜é‡åç§°å‘é‡</strong><br>
                        æŒ‡å®šç”¨äºå®šä¹‰äºšç»„çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç±»å˜é‡åç§°<br>
                        ç¤ºä¾‹ï¼š<code>c("age_group", "gender", "treatment")</code><br>
                        â€¢ æ¯ä¸ªå˜é‡å°†åˆ†åˆ«è¿›è¡Œäºšç»„åˆ†æ<br>
                        â€¢ å˜é‡åº”ä¸ºå› å­æˆ–å­—ç¬¦å‹
                    </td>
                </tr>
                <tr>
                    <td class="param-name">data</td>
                    <td class="param-type">data.frame æˆ– survey.design</td>
                    <td class="required">æ˜¯</td>
                    <td>-</td>
                    <td>
                        <strong>æ•°æ®é›†å¯¹è±¡</strong><br>
                        åŒ…å«å…¬å¼ä¸­æ‰€æœ‰å˜é‡çš„æ•°æ®æ¡†æˆ–è°ƒæŸ¥è®¾è®¡å¯¹è±¡<br>
                        â€¢ å¯¹äºæ™®é€šæ•°æ®ï¼šä½¿ç”¨æ•°æ®æ¡†<br>
                        â€¢ å¯¹äºè°ƒæŸ¥æ•°æ®ï¼šä½¿ç”¨<code>svydesign()</code>åˆ›å»ºçš„è®¾è®¡å¯¹è±¡
                    </td>
                </tr>
                <tr>
                    <td class="param-name">line</td>
                    <td class="param-type">logical</td>
                    <td>å¦</td>
                    <td class="default-value">TRUE</td>
                    <td>
                        <strong>æ˜¯å¦åœ¨è¾“å‡ºè¡¨æ ¼ä¸­æ·»åŠ åˆ†éš”çº¿</strong><br>
                        â€¢ <code>TRUE</code>: åœ¨ä¸åŒäºšç»„å˜é‡ä¹‹é—´æ·»åŠ ç©ºè¡Œåˆ†éš”<br>
                        â€¢ <code>FALSE</code>: ä¸æ·»åŠ åˆ†éš”çº¿ï¼Œè¾“å‡ºæ›´ç´§å‡‘çš„è¡¨æ ¼
                    </td>
                </tr>
                <tr>
                    <td class="param-name">decimal</td>
                    <td class="param-type">numeric</td>
                    <td>å¦</td>
                    <td class="default-value">2</td>
                    <td>
                        <strong>ç»“æœä¸­å°æ•°ä½æ•°</strong><br>
                        æ§åˆ¶é£é™©æ¯”(HR)å’Œç½®ä¿¡åŒºé—´çš„å°æ•°æ˜¾ç¤ºä½æ•°<br>
                        ç¤ºä¾‹ï¼š<code>decimal=3</code>æ˜¾ç¤ºä¸‰ä½å°æ•°
                    </td>
                </tr>
                <tr>
                    <td class="param-name">...</td>
                    <td class="param-type">additional arguments</td>
                    <td>å¦</td>
                    <td>-</td>
                    <td>
                        <strong>å…¶ä»–å‚æ•°</strong><br>
                        ä¼ é€’ç»™åº•å±‚<code>coxph()</code>å‡½æ•°çš„é¢å¤–å‚æ•°<br>
                        ä¾‹å¦‚ï¼š<code>weights</code>, <code>subset</code>, <code>na.action</code>ç­‰
                    </td>
                </tr>
            </table>

            <h3>ğŸ“‹ è¿”å›å€¼è¯´æ˜</h3>
            <table class="return-table">
                <tr>
                    <th width="20%">è¿”å›å†…å®¹</th>
                    <th width="80%">æè¿°</th>
                </tr>
                <tr>
                    <td>Variable</td>
                    <td>äºšç»„å˜é‡åç§°å’Œæ°´å¹³</td>
                </tr>
                <tr>
                    <td>Count</td>
                    <td>æ¯ä¸ªäºšç»„çš„æ ·æœ¬æ•°é‡</td>
                </tr>
                <tr>
                    <td>Percent</td>
                    <td>æ¯ä¸ªäºšç»„å æ€»æ ·æœ¬çš„ç™¾åˆ†æ¯”</td>
                </tr>
                <tr>
                    <td>Point Estimate</td>
                    <td>é£é™©æ¯”(HR)çš„ç‚¹ä¼°è®¡å€¼</td>
                </tr>
                <tr>
                    <td>Lower, Upper</td>
                    <td>95%ç½®ä¿¡åŒºé—´çš„ä¸‹é™å’Œä¸Šé™</td>
                </tr>
                <tr>
                    <td>P value</td>
                    <td>äºšç»„å†…çš„På€¼</td>
                </tr>
                <tr>
                    <td>P for interaction</td>
                    <td>äºšç»„é—´äº¤äº’ä½œç”¨çš„På€¼</td>
                </tr>
            </table>

            <h3>ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h3>
            <div class="example">
# åŸºæœ¬ç”¨æ³•ç¤ºä¾‹
library(survival)
library(dplyr)

# å‡†å¤‡æ•°æ®
lung_prepared <- lung %>%
  mutate(
    status = as.integer(status == 2),  # å°†statusè½¬æ¢ä¸º0/1
    sex = factor(sex, labels = c("Male", "Female")),
    age_group = factor(ifelse(age > 65, ">65", "â‰¤65")),
    performance = factor(ifelse(ph.karno >= 80, "Good", "Poor"))
  )

# Coxæ¨¡å‹äºšç»„åˆ†æ
result <- TableSubgroupMultiCox(
  formula = Surv(time, status) ~ sex,
  var_subgroups = c("age_group", "performance"), 
  data = lung_prepared,
  line = TRUE,
  decimal = 2
)

print(result)
            </div>

            <div class="warning">
                <strong>âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</strong>
                <ul>
                    <li>ç¡®ä¿ç”Ÿå­˜æ—¶é—´å˜é‡æ²¡æœ‰ç¼ºå¤±å€¼</li>
                    <li>äº‹ä»¶çŠ¶æ€å˜é‡åº”ä¸ºæ•°å€¼å‹(0/1)æˆ–é€»è¾‘å‹</li>
                    <li>äºšç»„å˜é‡åº”ä¸ºå› å­ç±»å‹ä»¥è·å¾—æ­£ç¡®çš„æ°´å¹³é¡ºåº</li>
                    <li>æ ·æœ¬é‡è¿‡å°çš„äºšç»„å¯èƒ½æ— æ³•å¾—åˆ°ç¨³å®šä¼°è®¡</li>
                </ul>
            </div>
        </div>

        <!-- TableSubgroupMultiGLM å‡½æ•° -->
        <div class="function-section">
            <div class="function-title">TableSubgroupMultiGLM() - GLMæ¨¡å‹äºšç»„åˆ†æ</div>
            
            <table>
                <tr>
                    <th width="15%">å‚æ•°å</th>
                    <th width="10%">ç±»å‹</th>
                    <th width="10%">å¿…éœ€</th>
                    <th width="15%">é»˜è®¤å€¼</th>
                    <th width="50%">è¯¦ç»†è¯´æ˜</th>
                </tr>
                <tr>
                    <td class="param-name">formula</td>
                    <td class="param-type">formula</td>
                    <td class="required">æ˜¯</td>
                    <td>-</td>
                    <td>
                        <strong>GLMæ¨¡å‹å…¬å¼</strong><br>
                        æ ¼å¼ï¼š<code>response ~ predictor_variables</code><br>
                        â€¢ <code>response</code>: å“åº”å˜é‡(è¿ç»­æˆ–åˆ†ç±»)<br>
                        â€¢ <code>predictor_variables</code>: é¢„æµ‹å˜é‡ï¼Œç”¨+å·è¿æ¥
                    </td>
                </tr>
                <tr>
                    <td class="param-name">var_subgroups</td>
                    <td class="param-type">character vector</td>
                    <td class="required">æ˜¯</td>
                    <td>-</td>
                    <td>
                        <strong>äºšç»„å˜é‡åç§°å‘é‡</strong><br>
                        æŒ‡å®šç”¨äºå®šä¹‰äºšç»„çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†ç±»å˜é‡åç§°<br>
                        ç¤ºä¾‹ï¼š<code>c("treatment", "stage", "comorbidity")</code><br>
                        â€¢ æ¯ä¸ªå˜é‡å°†åˆ†åˆ«è¿›è¡Œäºšç»„åˆ†æ
                    </td>
                </tr>
                <tr>
                    <td class="param-name">data</td>
                    <td class="param-type">data.frame æˆ– survey.design</td>
                    <td class="required">æ˜¯</td>
                    <td>-</td>
                    <td>
                        <strong>æ•°æ®é›†å¯¹è±¡</strong><br>
                        åŒ…å«å…¬å¼ä¸­æ‰€æœ‰å˜é‡çš„æ•°æ®æ¡†æˆ–è°ƒæŸ¥è®¾è®¡å¯¹è±¡
                    </td>
                </tr>
                <tr>
                    <td class="param-name">family</td>
                    <td class="param-type">character æˆ– family</td>
                    <td class="required">æ˜¯</td>
                    <td>-</td>
                    <td>
                        <strong>GLMåˆ†å¸ƒæ—</strong><br>
                        æŒ‡å®šè¯¯å·®åˆ†å¸ƒå’Œé“¾æ¥å‡½æ•°ï¼Œå¸¸ç”¨é€‰é¡¹ï¼š<br>
                        â€¢ <code>"gaussian"</code>: çº¿æ€§å›å½’(è¿ç»­ç»“æœ)<br>
                        â€¢ <code>"binomial"</code>: é€»è¾‘å›å½’(äºŒåˆ†ç±»ç»“æœ)<br>
                        â€¢ <code>"poisson"</code>: æ³Šæ¾å›å½’(è®¡æ•°æ•°æ®)<br>
                        â€¢ ä¹Ÿå¯ç›´æ¥ä½¿ç”¨<code>family</code>å¯¹è±¡
                    </td>
                </tr>
                <tr>
                    <td class="param-name">line</td>
                    <td class="param-type">logical</td>
                    <td>å¦</td>
                    <td class="default-value">TRUE</td>
                    <td>
                        <strong>æ˜¯å¦åœ¨è¾“å‡ºè¡¨æ ¼ä¸­æ·»åŠ åˆ†éš”çº¿</strong>
                    </td>
                </tr>
                <tr>
                    <td class="param-name">decimal</td>
                    <td class="param-type">numeric</td>
                    <td>å¦</td>
                    <td class="default-value">2</td>
                    <td>
                        <strong>ç»“æœä¸­å°æ•°ä½æ•°</strong>
                    </td>
                </tr>
                <tr>
                    <td class="param-name">...</td>
                    <td class="param-type">additional arguments</td>
                    <td>å¦</td>
                    <td>-</td>
                    <td>
                        <strong>å…¶ä»–å‚æ•°</strong><br>
                        ä¼ é€’ç»™åº•å±‚<code>glm()</code>å‡½æ•°çš„é¢å¤–å‚æ•°
                    </td>
                </tr>
            </table>

            <h3>ğŸ“‹ è¿”å›å€¼è¯´æ˜</h3>
            <table class="return-table">
                <tr>
                    <th width="20%">è¿”å›å†…å®¹</th>
                    <th width="80%">æè¿°</th>
                </tr>
                <tr>
                    <td>Variable</td>
                    <td>äºšç»„å˜é‡åç§°å’Œæ°´å¹³</td>
                </tr>
                <tr>
                    <td>Count</td>
                    <td>æ¯ä¸ªäºšç»„çš„æ ·æœ¬æ•°é‡</td>
                </tr>
                <tr>
                    <td>Percent</td>
                    <td>æ¯ä¸ªäºšç»„å æ€»æ ·æœ¬çš„ç™¾åˆ†æ¯”</td>
                </tr>
                <tr>
                    <td>OR / Coefficient</td>
                    <td>æ¯”å€¼æ¯”(äºŒåˆ†ç±»)æˆ–ç³»æ•°(è¿ç»­)çš„ç‚¹ä¼°è®¡</td>
                </tr>
                <tr>
                    <td>Lower, Upper</td>
                    <td>95%ç½®ä¿¡åŒºé—´çš„ä¸‹é™å’Œä¸Šé™</td>
                </tr>
                <tr>
                    <td>P value</td>
                    <td>äºšç»„å†…çš„På€¼</td>
                </tr>
                <tr>
                    <td>P for interaction</td>
                    <td>äºšç»„é—´äº¤äº’ä½œç”¨çš„På€¼</td>
                </tr>
            </table>

            <h3>ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h3>
            <div class="example">
# é€»è¾‘å›å½’äºšç»„åˆ†æç¤ºä¾‹
library(dplyr)

# ä½¿ç”¨mtcarsæ•°æ®åˆ›å»ºç¤ºä¾‹
data_prepared <- mtcars %>%
  mutate(
    vs = factor(vs, labels = c("V-shaped", "Straight")),
    am = factor(am, labels = c("Automatic", "Manual")),
    cyl_group = factor(ifelse(cyl > 6, "High", "Low")),
    hp_group = factor(ifelse(hp > 150, "High", "Low"))
  )

# é€»è¾‘å›å½’äºšç»„åˆ†æ
result_glm <- TableSubgroupMultiGLM(
  formula = vs ~ am,
  var_subgroups = c("cyl_group", "hp_group"),
  data = data_prepared,
  family = "binomial",
  line = TRUE,
  decimal = 3
)

print(result_glm)

# çº¿æ€§å›å½’äºšç»„åˆ†æç¤ºä¾‹
result_lm <- TableSubgroupMultiGLM(
  formula = mpg ~ wt,
  var_subgroups = c("am", "cyl_group"),
  data = data_prepared,
  family = "gaussian",
  line = FALSE
)

print(result_lm)
            </div>

            <div class="warning">
                <strong>âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</strong>
                <ul>
                    <li>ç¡®ä¿é€‰æ‹©æ­£ç¡®çš„åˆ†å¸ƒæ—(family)åŒ¹é…æ•°æ®ç±»å‹</li>
                    <li>å¯¹äºäºŒåˆ†ç±»ç»“æœï¼Œä½¿ç”¨<code>family = "binomial"</code></li>
                    <li>å¯¹äºè¿ç»­ç»“æœï¼Œä½¿ç”¨<code>family = "gaussian"</code></li>
                    <li>æ³¨æ„è¿‡ç¦»æ•£é—®é¢˜ï¼Œå¿…è¦æ—¶ä½¿ç”¨å‡†æ—(quasi-families)</li>
                </ul>
            </div>
        </div>

        <h2>ğŸ¯ å‡½æ•°æ¯”è¾ƒä¸é€‰æ‹©æŒ‡å—</h2>
        <table>
            <tr>
                <th width="20%">å‡½æ•°</th>
                <th width="30%">é€‚ç”¨åœºæ™¯</th>
                <th width="25%">ä¸»è¦è¾“å‡º</th>
                <th width="25%">å…³é”®åŒºåˆ«</th>
            </tr>
            <tr>
                <td><strong>TableSubgroupMultiCox</strong></td>
                <td>ç”Ÿå­˜åˆ†æã€æ—¶é—´-äº‹ä»¶æ•°æ®</td>
                <td>é£é™©æ¯”(HR)åŠç½®ä¿¡åŒºé—´</td>
                <td>å¤„ç†åˆ å¤±æ•°æ®ï¼Œéœ€è¦Survå¯¹è±¡</td>
            </tr>
            <tr>
                <td><strong>TableSubgroupMultiGLM</strong></td>
                <td>æ¨ªæ–­é¢ç ”ç©¶ã€è¿ç»­æˆ–åˆ†ç±»ç»“æœ</td>
                <td>ç³»æ•°/ORå€¼åŠç½®ä¿¡åŒºé—´</td>
                <td>éœ€è¦æŒ‡å®šåˆ†å¸ƒæ—(family)</td>
            </tr>
        </table>

        <div class="note">
            <strong>ğŸ’¡ å®ç”¨æŠ€å·§ï¼š</strong>
            <ul>
                <li>ä½¿ç”¨<code>factor()</code>æ˜ç¡®æŒ‡å®šäºšç»„å˜é‡çš„æ°´å¹³é¡ºåº</li>
                <li>å¯¹äºè°ƒæŸ¥æ•°æ®ï¼Œç›´æ¥ä¼ å…¥<code>svydesign</code>å¯¹è±¡</li>
                <li>ä½¿ç”¨<code>decimal</code>å‚æ•°æ§åˆ¶ç»“æœç²¾åº¦</li>
                <li>ç»“åˆ<code>kableExtra</code>åŒ…ç¾åŒ–è¾“å‡ºè¡¨æ ¼</li>
            </ul>
        </div>

    </div>
</body>
</html>
